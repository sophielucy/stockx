OCAMLC = ocamlc
OBJS = ../parser.cmo ../scanner.cmo parserize.cmo
INCLUDES = -I ../compiler

default: parserize

build:
	cd ..; make build

test: build
	cd ..; ./parser_test.sh; make clean

parserize: $(OBJS)
	$(OCAMLC) $(INCLUDES) -o parserize $(OBJS)

%.cmo: %.ml
	$(OCAMLC) $(INCLUDES) -c $<

%.cmi: %.mli
	$(OCAMLC) $(INCLUDES) -c $<

.PHONY: clean
clean:
	rm -f parserize *.cmo *.cmi

# Generated by ocamldep *.ml
parserize.cmo:
parserize.cmx: